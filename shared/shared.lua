J0 = {
    maxContracts = 8,
    moneyPerMile = 10,
    xpPerMile = 20,
    timePerMile = 8.5,
    
    Carts = {
        CART03 = { box_amount = 1, box_model = "p_chair_crate02x", cart_model = -1347283941 },
        CART06 = { box_amount = 1, box_model = "p_chair_crate02x", cart_model = 219205323 },
    },

    locations = {
        {
            name = "Valentine Frontier Express", 
            coords = vector3(-179.0, 626.0, 113.0),
            BoxDepo = vector4(-180.4367, 649.1989, 112.5790, 58.6727),
            spawn = {
                coords = vector3(-187.3921, 650.9539, 112.4330),
                heading = 324.1803
            },
            delivery = {
                coords = vector3(-189.8405, 641.9016, 113.3665),
                heading = 315.7911
            }
        },
        {
            name = "Blackwater Frontier Express", 
            coords = vector3(-880.8600, -1324.8273, 42.9775),
            BoxDepo = vector4(-878.6392, -1313.1569, 42.0125, 7.4379),
            spawn = {
                coords = vector3(-887.2252, -1318.1030, 42.0604),
                heading = 178.3552
            },
            delivery = {
                coords = vector3(-886.9358, -1329.9088, 42.2093),
                heading = 359.9212
            }
        },
        {
            name = "Heartlands Oil Field Frontier Express", 
            coords = vector3(493.3456, 581.8589, 108.4033),
            BoxDepo = vector4(498.5898, 591.7611, 108.2624, 285.2168),
            spawn = {
                coords = vector3(488.8830, 588.2346, 109.1544),
                heading = 68.8818
            },
            delivery = {
                coords = vector3(487.7566, 574.3735, 109.8771), 
                heading = 359.9212
            }
        },
        {
            name = "Strawberry Frontier Express", 
            coords = vector3(-1765.18, -384.21, 157.74), 
            BoxDepo = vector4(-1775.18, -374.21, 157.74, 270.0),
            spawn = {
                coords = vector3(-1765.18, -384.21, 157.74),
                heading = 270.0
            },
            delivery = {
                coords = vector3(-1780.0, -400.0, 157.74),
                heading = 270.0
            }
        },
        {
            name = "Rhodes Frontier Express", 
            coords = vector3(1289.91, -1300.89, 77.04),
            BoxDepo = vector4(1279.91, -1290.89, 77.04, 0.0),
            spawn = {
                coords = vector3(1289.91, -1300.89, 77.04),
                heading = 0.0
            },
            delivery = {
                coords = vector3(1270.0, -1320.0, 77.04),
                heading = 0.0
            }
        },
        {
            name = "Saint Denis Frontier Express", 
            coords = vector3(2747.23, -1394.92, 46.23),
            BoxDepo = vector4(2737.23, -1384.92, 46.23, 45.0),
            spawn = {
                coords = vector3(2747.23, -1394.92, 46.23),
                heading = 45.0
            },
            delivery = {
                coords = vector3(2720.0, -1420.0, 46.23),
                heading = 45.0
            }
        },
        {
            name = "Emerald Frontier Express", 
            coords = vector3(1522.05, 438.76, 90.68), 
            BoxDepo = vector4(1512.05, 448.76, 90.68, 135.0),

            spawn = {
                coords = vector3(1522.05, 438.76, 90.68),
                heading = 135.0
            },
            delivery = {
                coords = vector3(1500.0, 420.0, 90.68),
                heading = 135.0
            }
        },
        {
            name = "Van Horn Frontier Express", 
            coords = vector3(2985.92, 568.21, 44.63),
            BoxDepo = vector4(2975.92, 578.21, 44.63, 225.0),

            spawn = {
                coords = vector3(2985.92, 568.21, 44.63),
                heading = 225.0
            },
            delivery = {
                coords = vector3(2960.0, 550.0, 44.63),
                heading = 225.0
            }
        },
        {
            name = "Annesburg Frontier Express", 
            coords = vector3(2931.48, 1283.01, 44.65),
            BoxDepo = vector4(2921.48, 1293.01, 44.65, 315.0),
            spawn = {
                coords = vector3(2931.48, 1283.01, 44.65),
                heading = 315.0
            },
            delivery = {
                coords = vector3(2910.0, 1300.0, 44.65),
                heading = 315.0
            }
        },
        {
            name = "Bigvalley Frontier Express", 
            coords = vector3(-1301.32, 398.5, 95.43), 
            BoxDepo = vector4(-1311.32, 408.5, 95.43, 90.0),
            spawn = {
                coords = vector3(-1301.32, 398.5, 95.43),
                heading = 90.0
            },
            delivery = {
                coords = vector3(-1320.0, 380.0, 95.43),
                heading = 90.0
            }
        },
        {
            name = "Rigs Station Frontier Express", 
            coords = vector3(-1094.42, -574.89, 82.41), 
            BoxDepo = vector4(-1104.42, -564.89, 82.41, 180.0),
            spawn = {
                coords = vector3(-1094.42, -574.89, 82.41),
                heading = 180.0
            },
            delivery = {
                coords = vector3(-1110.0, -590.0, 82.41),
                heading = 180.0
            }
        },
        {
            name = "Armadillo Frontier Express", 
            coords = vector3(-3729.17, -2603.31, -12.94), 
            BoxDepo = vector4(-3739.17, -2593.31, -12.94, 270.0),
            spawn = {
                coords = vector3(-3729.17, -2603.31, -12.94),
                heading = 270.0
            },
            delivery = {
                coords = vector3(-3750.0, -2620.0, -12.94),
                heading = 270.0
            }
        },
        {
            name = "Rio Bravo Frontier Express", 
            coords = vector3(-5227.21, -3471.09, -20.55),
            BoxDepo = vector4(-5237.21, -3461.09, -20.55, 0.0),
            spawn = {
                coords = vector3(-5227.21, -3471.09, -20.55),
                heading = 0.0
            },
            delivery = {
                coords = vector3(-5250.0, -3490.0, -20.55),
                heading = 0.0
            }
        }
    },
    
    getLevelConfig = function(playerLevel)
        local bonus = playerLevel * 2
        return {
            level = playerLevel,
            minDistance = 5.0,
            maxDistance = 15.0,
            baseReward = 20 + bonus,
            baseXP = 40 + bonus,
            timeMultiplier = 1.0
        }
    end,

    calculateDistance = function(coord1, coord2)
        local meters = GetDistanceBetweenCoords(coord1.x, coord1.y, coord1.z, coord2.x, coord2.y, coord2.z, true)
        return meters / 1609.34
    end,
    
    generateContract = function(playerLevel, contractIdCounter, fromLocation)
        local toLocation = J0.locations[math.random(1, #J0.locations)]
        while toLocation == fromLocation do toLocation = J0.locations[math.random(1, #J0.locations)] end
        
        local distance = J0.calculateDistance(fromLocation.coords, toLocation.coords)
        local reward = math.floor(distance * J0.moneyPerMile)
        local xp = math.floor(distance * J0.xpPerMile)
        local timeLimit = math.max(15, math.min(60, math.floor(distance * J0.timePerMile)))
        
        local cartNames = {}
        for cartName, cartData in pairs(J0.Carts) do table.insert(cartNames, cartName) end
        local selectedCart = cartNames[math.random(1, #cartNames)]
        
        return {
            id = contractIdCounter,
            name = "Delivery Contract #" .. contractIdCounter,
            from = fromLocation.name,
            to = toLocation.name,
            fromCoords = fromLocation.coords,
            toCoords = toLocation.coords,
            reward = reward,
            xp = xp,
            distance = math.floor(distance * 10) / 10,
            timeLimit = timeLimit,
            requiredLevel = playerLevel,
            selectedCart = selectedCart,
            available = true,
            generatedAt = GetGameTimer()
        }
    end,
    
    generateNewContracts = function(playerLevel, maxContracts, fromLocation)
        local contracts = {}
        local count = math.min(maxContracts or J0.maxContracts, #J0.locations * 2)
        for i = 1, count do table.insert(contracts, J0.generateContract(playerLevel, i, fromLocation)) end
        return contracts
    end,
    
    contractCache = {},
    
    getCachedContracts = function(cacheKey)
        if J0.contractCache[cacheKey] then return J0.contractCache[cacheKey] end
        return nil
    end,
    
    cacheContracts = function(cacheKey, contracts)
        J0.contractCache[cacheKey] = contracts
    end
}